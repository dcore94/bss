var BSS={_get:function(i,n,t,e){return"function"==typeof i?i(n,t,e):i},polyfill:function(){var i="content"in document.createElement("template");if(!i){var n=Array.prototype.slice.call(document.getElementsByTagName("template"));for(var t in n){var e=n[t];for(content=e.children,fragment=document.createDocumentFragment(),e.style.display="none",j=0;node=content[j];j++)fragment.appendChild(node);e.content=fragment}}},commit:function(i){this._bindingCache.commit(i)},clear:function(i){this._bindingCache.clear(i);var n=document.querySelector(this.get(i.target));n.innerHTML=""},reapply:function(i){this._bindingCache.reapply(i)},apply:function(i){if(i.id||(i.id=1e12*Math.random()|0),this._bindingCache.clear(i),i.template){var n=this._get(i.template),t=document.querySelector(n);if(null==t)return void console.error("Template not found",n);var e=document.importNode(t.content,!0);this._apply(i,i,e);var r=this._get(i.target),a=document.querySelector(r);if(null==a)return void console.error("Target not found",r);a.parentNode.replaceChild(e,a)}else this._apply(i,i,document)},_apply:function(i,n,t,e,r,a){for(var o=t.querySelectorAll(this._get(i.target,null,e,a)),s=this._get(i["in"],o,e,a),c=s?s:e,s=this._get(i.out,o,r,a),d=s?s:r,l=a,h=i.recurse?this._get(i.recurse,o,e,a):[],h=h?h instanceof Array?h:[h]:[],f=0;f<o.length;f++){var p=o.item(f);if(c instanceof Array){var u=[];for(var f in c)u.push(p.cloneNode(!0));var m=p.parentNode;m.removeChild(p);for(var g in u){var v=u[g],_=d instanceof Array?d[g]:d;this._bind(n,i,v,g,c[g],_,d),this._registerEvents(i,v),m.appendChild(v);for(var y in h)this._apply(h[y],n,v,c[g],_,Number(g))}}else{this._bind(n,i,p,null,c,d,null),this._registerEvents(i,p);for(var y in h)this._apply(h[y],n,p,c,d,l)}}},_bind:function(i,n,t,e,r,a,o){if(r){var s=this._bindingCache.newBinding(t,r,e,n.apply);s.transfer(),this._bindingCache.addApplyBinding(i,s)}if(a){var s=this._bindingCache.newBinding(t,a,e,n.commit,o);this._bindingCache.addCommitBinding(i,s)}},_registerEvents:function(i,n){for(var t in i)if("on"==t){var e=i[t];for(var r in e){var a=e[r]instanceof Array?e[r]:[e[r]];a.forEach(function(i){n.addEventListener(r,i,!1)})}}else if(0==t.lastIndexOf("on_")){var a=i[t]instanceof Array?i[t]:[i[t]];a.forEach(function(i){n.addEventListener(t.substring(3),i,!1)})}},_bindingCache:{applies:{},commits:{},clear:function(i){this.applies[i.id]=this.applies[i.id]?this.applies[i.id].splice():[],this.commits[i.id]=this.commits[i.id]?this.commits[i.id].splice():[]},addApplyBinding:function(i,n){this.applies[i.id].push(n)},addCommitBinding:function(i,n){this.commits[i.id].push(n)},reapply:function(i){this.applies[i.id]&&this.applies[i.id].forEach(function(i){i.transfer()})},commit:function(i){this.commits[i.id]&&this.commits[i.id].forEach(function(i){i.transfer()})},newBinding:function(i,n,t,e,r){var a={element:i,data:n,index:t,fun:e,transfer:function(){this.fun&&this.fun(this.element,this.data,this.index)}};return r&&(a.container=r,i.bss_binding=a,a.remove=function(){this.container.splice(this.index,1)}),a}}};
