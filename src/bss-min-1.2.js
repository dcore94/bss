var BSS={_get:function(i,n,t,e){return"function"==typeof i?i(n,t,e):i},commit:function(i){this._bindingCache.commit(i)},clear:function(i){this._bindingCache.clear(i);var n=document.querySelector(this.get(i.target));n.innerHTML=""},reapply:function(i){this._bindingCache.reapply(i)},apply:function(i){if(i.id||(i.id=1e12*Math.random()|0),this._bindingCache.clear(i),i.template){var n=this._get(i.template),t=document.querySelector(n);if(null==t)return void console.error("Template not found",n);var e=document.importNode(t.content,!0);this._apply(i,i,e);var r=this._get(i.target),a=document.querySelector(r);if(null==a)return void console.error("Target not found",r);a.parentNode.replaceChild(e,a)}else this._apply(i,i,document)},_apply:function(i,n,t,e,r,a){for(var s=t.querySelectorAll(this._get(i.target,null,e,a)),o=i["in"]?this._get(i["in"],s,e,a):e,c=i.out?this._get(i.out,s,r,a):r,d=a,h=i.recurse?i.recurse instanceof Array?i.recurse:[i.recurse]:[],l=0;l<s.length;l++){var f=s.item(l);if(o instanceof Array){var u=[];for(var l in o)u.push(f.cloneNode(!0));var p=f.parentNode;p.removeChild(f);for(var m in u){var g=u[m],v=c instanceof Array?c[m]:c;this._bind(n,i,g,m,o[m],v,c),this._registerEvents(i,g),p.appendChild(g);for(var _ in h)this._apply(h[_],n,g,o[m],v,Number(m))}}else{this._bind(n,i,f,null,o,c,null),this._registerEvents(i,f);for(var _ in h)this._apply(h[_],n,f,o,c,d)}}},_bind:function(i,n,t,e,r,a,s){if(r){var o=this._bindingCache.newBinding(t,r,e,n.apply);o.transfer(),this._bindingCache.addApplyBinding(i,o)}if(a){var o=this._bindingCache.newBinding(t,a,e,n.commit,s);this._bindingCache.addCommitBinding(i,o)}},_registerEvents:function(i,n){for(var t in i)if("on"==t){var e=i[t];for(var r in e){var a=e[r]instanceof Array?e[r]:[e[r]];a.forEach(function(i){n.addEventListener(r,i,!1)})}}else if(t.startsWith("on_")){var a=i[t]instanceof Array?i[t]:[i[t]];a.forEach(function(i){n.addEventListener(t.substring(3),i,!1)})}},_bindingCache:{applies:{},commits:{},clear:function(i){this.applies[i.id]=this.applies[i.id]?this.applies[i.id].splice():[],this.commits[i.id]=this.commits[i.id]?this.commits[i.id].splice():[]},addApplyBinding:function(i,n){this.applies[i.id].push(n)},addCommitBinding:function(i,n){this.commits[i.id].push(n)},reapply:function(i){this.applies[i.id]&&this.applies[i.id].forEach(function(i){i.transfer()})},commit:function(i){this.commits[i.id]&&this.commits[i.id].forEach(function(i){i.transfer()})},newBinding:function(i,n,t,e,r){var a={element:i,data:n,index:t,fun:e,transfer:function(){this.fun&&this.fun(this.element,this.data,this.index)}};return r&&(a.container=r,i.bss_binding=a,a.remove=function(){this.container.splice(this.index,1)}),a}}};
