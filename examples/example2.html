<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Example 2: Preparing Json Object for Ajax submission</title>
		<script type="text/javascript" src="../src/bss-1.1.js"></script>
		<script type="text/javascript">
			var languages = [
				{ changeLang : "Change to Italian ", firstName : "Name", lastName : "Last name", age : "Age", legend : "Identity attribtues"},
				{ changeLang : "Cambia in tedesco ", firstName : "Nome", lastName : "Cognome", age : "Età", legend : "Attributi identità"},
				{ changeLang : "Wechsel auf Englisch ", firstName : "Name", lastName : "Nachname", age : "Alter", legend: "Identität Attribute"}
			]
		 	var selectedLanguage = -1
			var bss_lang = {
				target : "body",
				in : function (e, d, i){ selectedLanguage = (selectedLanguage + 1) % languages.length; return languages[selectedLanguage]},
				recurse : [
					{
						target : "#changelang",
						apply : function (e, d, i) { e.value = d.changeLang}
					},
					{
						target : "form fieldset[name=identity] legend",
						apply : function (e, d, i) { e.textContent = d.legend}
					},
					{
						target : "form label[for=firstname]",
						apply : function (e, d, i) { e.innerText = e.textContent = d.firstName},
					},
					{
						target : "form label[for=lastname]",
						apply : function (e, d, i) { e.innerText = e.textContent = d.lastName}
					},
					{
						target : "form label[for=age]",
						apply : function (e, d, i) { e.innerText = e.textContent = d.age}
					},
				]
			}
			var restQuery = {}
		 	var bss_out = {
				target : "form",
				out : restQuery,
				recurse : [
					{
						target : "#firstname",
						commit : function (e, d, i){ d.firstName = e.value}
					},
					{
						target : "#lastname",
						commit : function (e, d, i){ d.lastName = e.value}
					},
					{
						target : "#age",
						commit : function (e, d, i){ d.age = e.value}
					}
				]
			}
		</script>
	</head>
	<body onload="BSS.apply(bss_lang); BSS.apply(bss_out)" style="position:absolute;width:100%;height:100%">
		<h2>Example 2: Preparing Json Object for Ajax submission</h2>
		<h3>Shows committing to output model on form submit...</h3>
		<input id="changelang" type="button" value="???" 
			onclick="BSS.apply(bss_lang)"></input>
		<hr/>
		<form onsubmit="BSS.commit(bss_out), console.log(restQuery); return false;">
			<fieldset name="identity">
				<legend>???</legend>
				<label for="firstname">???</label>
				<input id="firstname"></input>
				<label for="lastname">???</label>
				<input id="lastname"></input>
				<label for="age">???</label>
				<input id="age"></input>
			</fieldset>
			<input type="submit" value="submit"></input>
		</form>
		<div style="position:absolute;bottom:10%">
			<hr/>
			<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
			<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
		</a><br />
		<span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">BSS Examples</span> by 
		<span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Marco Lettere</span> is licensed under a 
		<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
		</div>
	</body>
</html>
